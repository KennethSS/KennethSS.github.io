<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>케니스의 개발 블로그</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="케니스의 개발 블로그"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="케니스의 개발 블로그"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta property="og:type" content="blog"><meta property="og:title" content="케니스의 개발 블로그"><meta property="og:url" content="http://example.com/"><meta property="og:site_name" content="케니스의 개발 블로그"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/img/og_image.png"><meta property="article:author" content="John Doe"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com"},"headline":"케니스의 개발 블로그","image":["http://example.com/img/og_image.png"],"author":{"@type":"Person","name":"John Doe"},"publisher":{"@type":"Organization","name":"케니스의 개발 블로그","logo":{"@type":"ImageObject","url":"http://example.com/img/logo.svg"}},"description":""}</script><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.svg" alt="케니스의 개발 블로그" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/KennethSS"><i class="fab fa-github"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-9-tablet is-9-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-27T08:36:38.000Z" title="2023. 1. 27. 오후 5:36:38">2023-01-27</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-28T05:33:19.681Z" title="2023. 1. 28. 오후 2:33:19">2023-01-28</time></span><span class="level-item"><a class="link-muted" href="/categories/Kotlin/">Kotlin</a></span><span class="level-item">11 minutes read (About 1658 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/27/Kotlin-1-8-0-%EC%97%85%EB%8D%B0%EC%9D%B4%ED%8A%B8-%EC%9A%94%EC%95%BD/">Kotlin 1.8.0 업데이트 요약</a></h1><div class="content"><p>코틀린 1.8.0 버전이 2022년 12월 28일에 정식으로 출시되었습니다. 새로운 코틀린 버전이 출시되면서 어떤 부분이 변경되었는지 업데이트를 요약해 보았습니다.</p>
<ul>
<li><p>IDE 지원</p>
</li>
<li><p>kotlin-reflect 성능 개선</p>
</li>
<li><p>최적화 비활성화를 위한 컴파일러 옵션 </p>
</li>
<li><p>JVM 컴파일 Target 업데이트</p>
</li>
<li><p>Java에서 Kotlin으로 TimeUnit 전환</p>
</li>
<li><p>Gradle 7.2 &amp; 7.3</p>
</li>
<li><p>Lombok @Builder 어노테이션 지원</p>
</li>
<li><p>코틀린 멀티플랫폼 : 새로운 안드로이드 소스세트 레이아웃</p>
</li>
<li><p>기타</p>
</li>
</ul>
<h2 id="IDE-지원"><a href="#IDE-지원" class="headerlink" title="IDE 지원"></a>IDE 지원</h2><p>코틀린 1.8.0 플러그인은 아래 IDE 버전에서 사용할 수 있습니다.</p>
<table>
<thead>
<tr>
<th>IDE</th>
<th>Supported versions</th>
</tr>
</thead>
<tbody><tr>
<td>IntelliJ IDEA</td>
<td>2021.3, 2022.1, 2022.2</td>
</tr>
<tr>
<td>Android Studio</td>
<td>Electric Eel (221), Flamingo (222)</td>
</tr>
</tbody></table>
<h2 id="kotlin-reflect-성능-개선"><a href="#kotlin-reflect-성능-개선" class="headerlink" title="kotlin-reflect 성능 개선"></a>kotlin-reflect 성능 개선</h2><p>kotlin-reflect가 JVM target 1.8로 컴파일 된다는 이점을 활용하여 내부 캐시 메커니즘을 Java의 <code>ClassValue</code>로 마이그레이션 하면서 기존에만 캐싱하던  <code>KClass</code>와 더불어 이제는 <code>KType</code> 그리고 <code>KDeclarationContainer</code>까지 캐싱됩니다. 이러한 변경으로 <code>typeOf()</code>가 호출할 때 큰 성능 향상을 가져갈 수 있습니다.</p>
</br>



<h2 id="최적화-비활성화를-위한-컴파일러-옵션"><a href="#최적화-비활성화를-위한-컴파일러-옵션" class="headerlink" title="최적화 비활성화를 위한 컴파일러 옵션"></a>최적화 비활성화를 위한 컴파일러 옵션</h2><p>코틀린 1.8.0에서는 더 나은 디버깅 환경을 위해 최적화 옵션을 비활성화하는  <code>-Xdebug</code> 컴파일러 옵션이 추가되었습니다. 이 옵션을 활성화하면 코루틴의 <code>was optimized out</code>기능이 비활성화 됩니다. 앞으로는 더 많은 최적화를 비활성화 할 수 있는 옵션들이 추가될 예정입니다.</p>
<p><code>was optimized out</code>은 일시 중단 함수를 사용할 때 변수들을 최적화하는 기능입니다. 하지만 최적화된 변수를 볼 수 없어 코드를 디버깅 하기에는 어려움이 따릅니다.</p>
<blockquote>
<p><code>-Xdebug</code> 를 통해 이 기능을 비활성화 하면 메모리 누수가 발생할 수 있으므로 </p>
<p>이 옵션은 프로덕션에서는 절대 사용해서는 안됩니다. </p>
</blockquote>
</br>



<h2 id="JVM-컴파일-Target-업데이트"><a href="#JVM-컴파일-Target-업데이트" class="headerlink" title="JVM 컴파일 Target 업데이트"></a>JVM 컴파일 Target 업데이트</h2><p>Kotlin 1.8.0 버전부터 코틀린 컴파일러는 JVM 버전 19를 지원합니다.</p>
<p>기존에 JVM target 1.6에서 컴파일되었던 코틀린 표준 라이브러리(<code>kotlin-stdlib</code>, <code>kotlin-reflect</code>, and <code>kotlin-script-*</code>)가 JVM target 1.8로 컴파일 됩니다. 또한 코틀린 1.8.0에서는 JVM target 1.6 그리고 1.7을 지원하지 않습니다. 결과적으로 이러한 아티팩트들이 <code>kotlin-stdlib</code>로 병합되기 때문에 빌드 스크립트를 더  이상  <code>kotlin-stdlib-jdk7</code> and <code>kotlin-stdlib-jdk8</code>을 분리해서  선언하지 않아도 됩니다.</p>
<blockquote>
<p>:blue_book: 빌드 스크립트에서 <code>kotlin-stdlib-jdk7</code> 이나 <code>kotlin-stdlib-jdk8</code> 이 명시적으로 선언되어있는 경우 <code>kotlin-stdlib</code>로 바꿔야 합니다.</p>
</blockquote>
<p>서로 다른 버전의 코틀린 표준 라이브러리를 섞어서 사용한다면 클래스가 중복되거나 누락될 가능성이 있습니다. 이를 방지하기 위해 Kotlin Gradle 플러그인을 사용하면 <a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/whatsnew18.html#usage-of-the-latest-kotlin-stdlib-version-in-transitive-dependencies">표준 라이브러리 정렬</a>에 도움이 됩니다.</p>
<h2 id="Java에서-Kotlin으로-TimeUnit-전환"><a href="#Java에서-Kotlin으로-TimeUnit-전환" class="headerlink" title="Java에서 Kotlin으로 TimeUnit 전환"></a>Java에서 Kotlin으로 TimeUnit 전환</h2><p>Kotlin 1.6.0에서 실험적이었던 <code>toTimeUnit()</code> 그리고 <code>toDurationUnit()</code>기능들은 <code>kotlin.time</code> 패키지에서 스테이블 되었습니다. 이 함수들은 Java와 Kotlin의 상호운용성을 향상시키며 이제는 Java의 <code>java.util.concurrent.TimeUnit</code>을 Kotlin의 <code>kotlin.time.DurationUnit</code>으로 쉽게 전환할 수 있습니다. 이 함수들은 JVM에서만 지원합니다.</p>
<h2 id="Gradle-7-2-amp-7-3"><a href="#Gradle-7-2-amp-7-3" class="headerlink" title="Gradle 7.2 &amp; 7.3"></a>Gradle 7.2 &amp; 7.3</h2><p>코틀린 1.8.0은 Gradle 버전 7.2와 7.3을 완전히 지원합니다. Gradle 최소 지원 버전은 6.8.3 이며 Android Gradle 플러그인은 4.1.3 입니다. Gradle 버전을 최신 릴리즈 버전까지 사용할 수 있으나 지원 중단 경고가 표시되거나 새로운 Gradle 기능이 동작하지 않을 수도 있습니다.</p>
<h2 id="Lombok-Builder-어노테이션-지원"><a href="#Lombok-Builder-어노테이션-지원" class="headerlink" title="Lombok @Builder 어노테이션 지원"></a>Lombok @Builder 어노테이션 지원</h2><p>많은 커뮤니티에서 코틀린 Lombok의 @Builder 어노테이션을 지원해달라는 요청이 많았고 1.8.0부터는 해당 어노테이션을 지원합니다. Lombok을 사용하려면 gradle 플러그인을 추가해야 합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    kotlin(<span class="string">&quot;plugin.lombok&quot;</span>) version <span class="string">&quot;1.8.0&quot;</span></span><br><span class="line">    id(<span class="string">&quot;io.freefair.lombok&quot;</span>) version <span class="string">&quot;5.3.0&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>아직 <code>@SuperBuilder</code> 혹은 <code>@Tolerate</code> 어노테이션을 지원할 계획은 없지만 많은 사람들의 요구가 있을 때 고려해볼 수 있습니다.</p>
<h2 id="코틀린-멀티플랫폼-새로운-안드로이드-소스세트-레이아웃"><a href="#코틀린-멀티플랫폼-새로운-안드로이드-소스세트-레이아웃" class="headerlink" title="코틀린 멀티플랫폼 : 새로운 안드로이드 소스세트 레이아웃"></a>코틀린 멀티플랫폼 : 새로운 안드로이드 소스세트 레이아웃</h2><p>코틀린 1.8.0부터는 여러 면에서 혼란스러웠던 디렉터리들의 네이밍 스키마들을 대체하는 새로운 안드로이드 소스세트 레이아웃 도입되었습니다.</p>
<p><code>AndroidTest</code> 디렉터리를 예로 들면 하나는 <code>KotlinSourceSets</code>이었고 다른 하나는 <code>AndroidSourceSets</code> 였습니다.</p>
<ul>
<li>코틀린의 <code>androidTest</code>는 <code>unitTest</code> 형태를 의미하지만 안드로이드 진영에서는 <code>interationTest</code>를 의미합니다.</li>
<li><code>src/androidTest/java</code>는 <code>UnitTest</code>가 있고 <code>src/androidTest/kotlin</code>는 <code>InstrumentedTest</code>가 있는 혼란스러운 <code>SourceDirectories</code> 레이아웃을 만듭니다.</li>
<li><code>KotlinSourceSets</code> 그리고 <code>AndroidSourceSets</code> 모두 Gradle 구성에 비슷한 네이밍 스키마를 사용하므로 <code>androidTest</code>의 결과 구성들은  <code>androidTestImplementation</code>, <code>androidTestApi</code>, <code>androidTestRuntimeOnly</code> 그리고  <code>androidTestCompileOnly</code> 와 같습니다.</li>
</ul>
<h3 id="KotlinSourceSet-네이밍-스키마"><a href="#KotlinSourceSet-네이밍-스키마" class="headerlink" title="KotlinSourceSet 네이밍 스키마"></a>KotlinSourceSet 네이밍 스키마</h3><table>
<thead>
<tr>
<th>현재 소스 세트 레이아웃</th>
<th>새로운 소스 세트 레이아웃</th>
</tr>
</thead>
<tbody><tr>
<td><code>targetName</code> + <code>AndroidSourceSet.name</code></td>
<td><code>targetName</code> + <code>AndroidVariantType</code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>현재 소스 세트 레이아웃</th>
<th>새로운 소스 세트 레이아웃</th>
</tr>
</thead>
<tbody><tr>
<td>main</td>
<td>androidMain</td>
<td>androidMain</td>
</tr>
<tr>
<td>test</td>
<td>androidTest</td>
<td>android<strong>Unit</strong>Test</td>
</tr>
<tr>
<td>androidTest</td>
<td>android<strong>Android</strong>Test</td>
<td>android<strong>Instrumented</strong>Test</td>
</tr>
</tbody></table>
<h3 id="SourceDirectories"><a href="#SourceDirectories" class="headerlink" title="SourceDirectories"></a>SourceDirectories</h3><table>
<thead>
<tr>
<th>현재 소스 세트 레이아웃</th>
<th>새로운 소스 세트 레이아웃</th>
</tr>
</thead>
<tbody><tr>
<td>The layout adds additional <code>/kotlin</code> SourceDirectories</td>
<td><code>src/&#123;AndroidSourceSet.name&#125;/kotlin</code>, <code>src/&#123;KotlinSourceSet.name&#125;/kotlin</code></td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>현재 소스 세트 레이아웃</th>
<th>새로운 소스 세트 레이아웃</th>
</tr>
</thead>
<tbody><tr>
<td>main</td>
<td>src&#x2F;androidMain&#x2F;kotlin, src&#x2F;main&#x2F;kotlin, src&#x2F;main&#x2F;java</td>
<td>src&#x2F;androidMain&#x2F;kotlin, src&#x2F;main&#x2F;kotlin, src&#x2F;main&#x2F;java</td>
</tr>
<tr>
<td>test</td>
<td>src&#x2F;androidTest&#x2F;kotlin, src&#x2F;test&#x2F;kotlin, src&#x2F;test&#x2F;java</td>
<td>src&#x2F;android<strong>Unit</strong>Test&#x2F;kotlin, src&#x2F;test&#x2F;kotlin, src&#x2F;test&#x2F;java</td>
</tr>
<tr>
<td>androidTest</td>
<td>src&#x2F;android<strong>Android</strong>Test&#x2F;kotlin, src&#x2F;androidTest&#x2F;java</td>
<td>src&#x2F;android<strong>Instrumented</strong>Test&#x2F;kotlin, src&#x2F;androidTest&#x2F;java, <strong>src&#x2F;androidTest&#x2F;kotlin</strong></td>
</tr>
</tbody></table>
<h3 id="AndroidManifest-xml-파일-위치"><a href="#AndroidManifest-xml-파일-위치" class="headerlink" title="AndroidManifest.xml 파일 위치"></a>AndroidManifest.xml 파일 위치</h3><table>
<thead>
<tr>
<th>현재 소스 세트 레이아웃</th>
<th>새로운 소스 세트 레이아웃</th>
</tr>
</thead>
<tbody><tr>
<td>src&#x2F;{<strong>Android</strong>SourceSet.name}&#x2F;…Manifest.xml</td>
<td>src&#x2F;{<strong>Kotlin</strong>SourceSet.name}&#x2F;…Manifest.xml</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th></th>
<th>현재 소스 세트 레이아웃</th>
<th>새로운 소스 세트 레이아웃</th>
</tr>
</thead>
<tbody><tr>
<td>main</td>
<td>src&#x2F;main&#x2F;AndroidManifest.xml</td>
<td>src&#x2F;<strong>android</strong>Main&#x2F;AndroidManifest.xml</td>
</tr>
<tr>
<td>debug</td>
<td>src&#x2F;debug&#x2F;AndroidManifest.xml</td>
<td>src&#x2F;<strong>android</strong>Debug&#x2F;AndroidManifest.xml</td>
</tr>
</tbody></table>
<h2 id="기타"><a href="#기타" class="headerlink" title="기타"></a>기타</h2><ul>
<li>Xcode 14.1 지원</li>
<li>Objective-C&#x2F;Swift 와의 상호운용성 향상</li>
<li>CocoaPods Gradle 플러그인에서 Dynamic frameworks를 기본으로 연결</li>
</ul>
<p>지금까지 긴 글 읽어 주셔서 감사합니다. :bow:</p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><ul>
<li><a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/whatsnew18.html">Kotlin 1.8.0</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-19T08:40:02.000Z" title="2023. 1. 19. 오후 5:40:02">2023-01-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-19T08:42:26.143Z" title="2023. 1. 19. 오후 5:42:26">2023-01-19</time></span><span class="level-item"><a class="link-muted" href="/categories/Design-Pattern/">Design Pattern</a><span> / </span><a class="link-muted" href="/categories/Design-Pattern/Behavioral/">Behavioral</a></span><span class="level-item">6 minutes read (About 904 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/19/%EC%BB%A4%EB%A7%A8%EB%93%9C-%ED%8C%A8%ED%84%B4-Command-Pattern/">커맨드 패턴(Command Pattern)</a></h1><div class="content"><h2 id="Command-패턴-이란"><a href="#Command-패턴-이란" class="headerlink" title="Command 패턴 이란?"></a>Command 패턴 이란?</h2><p><strong>커맨드 패턴</strong>(Command pattern)이란 요청을 객체의 형태로 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EC%BA%A1%EC%8A%90%ED%99%94">캡슐화</a>하여 사용자가 보낸 요청을 나중에 이용할 수 있도록 매서드 이름, 매개변수 등 요청에 필요한 정보를 저장 또는 로깅, 취소할 수 있게 하는 패턴이다.</p>
<p>커맨드 패턴에 사용되는 4가지 주요 용어가 있다</p>
<ul>
<li><strong>명령(Command)</strong>: 수신자의 정보 + 행동</li>
<li><strong>수신자(Receiver)</strong>: 행동을 하는 객체</li>
<li><strong>발동자(Invoker)</strong>: 커맨드를 저장하는 객체</li>
<li><strong>클라이언트(Client)</strong>: 커맨드 객체를 저장하고 발동하여 수신자에게 전달</li>
</ul>
<p>안드로이드에서는 <code>Thread</code> 와 <code>Runnable</code> 이 대표적인 커맨드 패턴사례라고 볼 수 있다</p>
<h2 id="Command-패턴-사용해-보기"><a href="#Command-패턴-사용해-보기" class="headerlink" title="Command 패턴 사용해 보기"></a>Command 패턴 사용해 보기</h2><p>필자는 자동차를 좋아합니다. 뚜껑이 열리는 차를 부르는 방식이 각자 다른거 아시나요?</p>
<p>로드스터, 까브리올레, 컨버터블 등이 있습니다. 벤츠 모델은 까브리올레로 명칭하고 있고 포드 같은 미국 계열의 차는 컨버터블로 불리고 있습니다. 어떤 리모컨으로 자동차의 뚜껑을 열고 닫을 때 벤츠나 포드의 리모컨을 나누지 않고 하나의 리모컨으로 기능을 구현합니다. 예시는 다음과 같습니다.</p>
<ul>
<li>자동차를 컨트롤하는 리모컨이 있음</li>
<li>차종에 관계 없이 차 뚜껑을 열고 닫을 수 있어야 함</li>
</ul>
<p>위의 구현을 Command 패턴으로 구현해 보겠습니다.</p>
<p>먼저 뚜껑을 열고 닫는 Command Interface를 작성합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> <span class="title class_">Command</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">openRoof</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>벤츠와 포드 자동차의 객체를 만듭니다. 두 자동차는 명칭과 동작하는 방식이 다르기 때문에 함수명이 다릅니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BenzCar</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">openCabriolet</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">&quot;Benz: Open Cabriolet&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FordCar</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">openConvertible</span><span class="params">()</span></span> &#123;</span><br><span class="line">        println(<span class="string">&quot;Ford: Open Convertible&quot;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>이제 Command를 Implement한 객체를 BenzCommand를 생성합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">BenzCommand</span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> benzCar: BenzCar</span><br><span class="line">) : Command &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">openRoof</span><span class="params">()</span></span> &#123;</span><br><span class="line">        benzCar.openCabriolet()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">FordCommand</span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> fordCar: FordCar</span><br><span class="line">) : Command &#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">fun</span> <span class="title">openRoof</span><span class="params">()</span></span> &#123;</span><br><span class="line">        fordCar.openConvertible()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>자 이제 실제로 만든 Command 패턴을 이용해 잘 동작되는지 확인해보겠습니다</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">RemoteController</span>(</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> command: Command? = <span class="literal">null</span></span><br><span class="line">) &#123;</span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">setCommand</span><span class="params">(command: <span class="type">Command</span>)</span></span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.command = command</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">openRoof</span><span class="params">()</span></span> &#123;</span><br><span class="line">        command?.openRoof()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Command를 이용해 차량을 컨트롤하는 <code>RemoteController</code> 클래스를 생성합니다.</p>
<p>테스트코드로 잘 동작되는지 확인해보겠습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">CommandUnitTest</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">val</span> remote: RemoteController = RemoteController()</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">testBenzCar</span><span class="params">()</span></span> &#123;</span><br><span class="line">        remote.setCommand(BenzCommand(BenzCar()))</span><br><span class="line">        remote.openRoof()</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">testFordCar</span><span class="params">()</span></span> &#123;</span><br><span class="line">        remote.setCommand(FordCommand(FordCar()))</span><br><span class="line">        remote.openRoof()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>RemoteContrller 인스턴스를 생성하고 리모컨에 할당할 차량의 커맨드 인스턴스를 할당해줍니다.<br>그리고 입력된 커맨드 인스턴스를 바탕으로 RemoteController의 open()을 실행해봅니다. </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Ford: Open Convertible</span><br><span class="line">Benz: Open Cabriolet</span><br></pre></td></tr></table></figure>

<p>각 차량에 맞게 함수가 호출되었습니다. </p>
<p>앞서 말한 4가지 용어 중 각 해당 되는 클래스입니다.</p>
<ul>
<li>명령(Command): Command</li>
<li>수신자(Receiver): BenzCommand, FordCommand</li>
<li>발동자(Invoker): RemoteController</li>
<li>클라이언트(Client): TestCode</li>
</ul>
<h2 id="장단점"><a href="#장단점" class="headerlink" title="장단점"></a>장단점</h2><h3 id="장점"><a href="#장점" class="headerlink" title="장점"></a>장점</h3><ul>
<li>시스템의 결합도를 낮춤</li>
<li>기존 코드를 수정하지 않고 새 커맨드를 이용하여 추가할 수 있음</li>
<li>명령 호출자와 수신자간의 의존성이 없음</li>
</ul>
<h3 id="단점"><a href="#단점" class="headerlink" title="단점"></a>단점</h3><ul>
<li>명령에 대한 클래스가 점점 늘어남</li>
</ul>
<h2 id="마무리"><a href="#마무리" class="headerlink" title="마무리"></a>마무리</h2><p>커맨드 패턴을 활용하여 큐(Queue)에 저장하여 execute() 만 실행하여 작업큐 관련 작업에 사용 할 수 있습니다. </p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-19T07:33:16.000Z" title="2023. 1. 19. 오후 4:33:16">2023-01-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-19T07:34:35.539Z" title="2023. 1. 19. 오후 4:34:35">2023-01-19</time></span><span class="level-item"><a class="link-muted" href="/categories/CS/">CS</a><span> / </span><a class="link-muted" href="/categories/CS/Data-Structure/">Data Structure</a></span><span class="level-item">3 minutes read (About 415 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/19/Vector%EC%99%80-ArrayList-%EC%B0%A8%EC%9D%B4/">Vector와 ArrayList 차이</a></h1><div class="content"><h3 id="Vector의-특징"><a href="#Vector의-특징" class="headerlink" title="Vector의 특징"></a>Vector의 특징</h3><p>현재 <code>Collection</code> 프레임워크에 포함되어 있지만 초기 자바에서는 인터페이스로 정의 되어 있었습니다. </p>
<ul>
<li>필요에 따라 크기를 동적으로 조절 가능</li>
<li>배열과 같이 Index에 접근 및 제어 가능</li>
<li>동기화(Thread Safe)가 되어 있음</li>
</ul>
<h3 id="ArrayList의-특징"><a href="#ArrayList의-특징" class="headerlink" title="ArrayList의 특징"></a>ArrayList의 특징</h3><p><code>Collection</code> 프레임워크에 포함되어 있는 자료구조입니다.</p>
<ul>
<li>크기를 동적으로 바꿀 수 있는 동적 배열</li>
<li>배열에서의 조작이 많을 때 유용합니다(특히 Index를 통한 접근)</li>
<li>타입 객체를 참조해서 사용</li>
</ul>
<h3 id="그럼-본격적으로-차이는"><a href="#그럼-본격적으로-차이는" class="headerlink" title="그럼 본격적으로 차이는?"></a>그럼 본격적으로 차이는?</h3><p>가장 중요한 차이점은 <strong>동기화 유무</strong> 입니다. Vector의 구조를 보면 <code>element</code> 접근에 관한 함수들은 synchronized 처리가 되어있습니다. 즉 여러 스레드에 접근에도 Thread Safe(스레드 안전)한 특징을 가지고 있습니다.</p>
<ul>
<li><strong>성능:</strong> ArrayList 동기화를 지원하는 Vector 보다 좋은 성능을 가지고 있습니다.</li>
<li><strong>스레드 세이프:</strong> Vector는 동기화를 지원하므로 ArrayList에 비해 멀티 스레드에 안전합니다.</li>
<li><strong>배열의 길이 증가:</strong> 초기 할당한 배열의 최대길이에 도달했을 때 ArrayList는 50%씩 증가하는 반면 Vector는 2배씩 크기가 증가합니다.</li>
</ul>
<h3 id="그럼-무엇을-써야하나"><a href="#그럼-무엇을-써야하나" class="headerlink" title="그럼 무엇을 써야하나?"></a>그럼 무엇을 써야하나?</h3><p>Vector는 Java초기에 만들어서 초기 버전의 호환성이 아니라면 많이 쓰지 않습니다. ArrayList를 사용하되 멀티 스레드에 대해 적절한 처리를 해서 사용해 주시면 됩니다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-19T07:23:39.000Z" title="2023. 1. 19. 오후 4:23:39">2023-01-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-19T07:24:14.192Z" title="2023. 1. 19. 오후 4:24:14">2023-01-19</time></span><span class="level-item"><a class="link-muted" href="/categories/CS/">CS</a></span><span class="level-item">5 minutes read (About 745 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/19/%ED%8E%98%EC%9D%B4%EC%A7%95-%EA%B5%90%EC%B2%B4-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98-Paging-Replacement-Algorithm/">페이징 교체 알고리즘(Paging Replacement Algorithm)</a></h1><div class="content"><h3 id="페이징-교체-알고리즘-이란"><a href="#페이징-교체-알고리즘-이란" class="headerlink" title="페이징 교체 알고리즘 이란?"></a>페이징 교체 알고리즘 이란?</h3><p>페이지 교체 알고리즘(Paging Replacement Algorithm)은 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%ED%8E%98%EC%9D%B4%EC%A7%95_%EA%B8%B0%EB%B2%95">페이징 기법</a>으로 메모리를 관리하는 운영체제에서 <a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%ED%8E%98%EC%9D%B4%EC%A7%80_%EB%B6%80%EC%9E%AC">페이지 부재(Page Fault)</a>가 발생하여 새로운 페이지를 할당하기 위해 현재 할당된 페이지 중 어느 것과 교체할지를 결정하는 방법이다. </p>
<p>페이지 부재(Page Fault)는 실행중인 프로그램이 가상 메모리에 맵핑되었지만 실제 물리적 메모리에 로드되지 않은 메모리 페이지에 접근할 때 오류가 발생합니다. 물리적 메모리는 가상 메모리보다 작기 때문에 이러한 오류가 발생할 가능성이 높습니다. 이때 기존 페이지를 희생(Victim Page)하여 새로운 페이지를 교체하는 것이 페이징 교체 알고리즘입니다.</p>
<blockquote>
<p>📘 Info</p>
<p><strong>프레임</strong>: 물리 메모리를 일정 크기로 나눈 블록 </p>
<p><strong>페이지</strong> : 가상 메모리를 일정한 크기로 나눈 블록</p>
</blockquote>
<h3 id="FIFO-First-In-First-Out-알고리즘"><a href="#FIFO-First-In-First-Out-알고리즘" class="headerlink" title="FIFO(First In First Out) 알고리즘"></a>FIFO(First In First Out) 알고리즘</h3><p><img src="https://blog.kakaocdn.net/dn/U5nSm/btq9PUpYAl8/WtyueVDWhp6E2nLGbNHYWK/img.png" alt="img"></p>
<ul>
<li>가장 먼저 메모리에 올라온 페이지를 가장 먼저 내보내는 알고리즘</li>
<li>구현은 간단하지만 성능에는 이점이 없음</li>
<li>들어온 시간을 저장 순서대로 저장하거나 큐를 이용해 저장</li>
<li>초기화 코드에 적절 할 수 있다</li>
<li>Belady’s anomaly 현상이 발생할 수 있다</li>
</ul>
<blockquote>
<p>Belady’s anomaly란 페이지 프레임이 증가되어도 페이지 부재(Page Fault)가 줄어들지 않고 늘어나는 현상. FIFO알고리즘에서 3개의 슬롯에서 3, 2, 1, 0, 3, 2, 4, 3, 2, 1, 0, 4가 수행될 때 9번의 페이지 부재가 나타나지만 슬롯을 4개로 늘린다면 페이지 부재가 10개로 오히려 늘어난다.</p>
</blockquote>
<h3 id="OPT-Optimal-알고리즘"><a href="#OPT-Optimal-알고리즘" class="headerlink" title="OPT(Optimal) 알고리즘"></a>OPT(Optimal) 알고리즘</h3><p><img src="https://blog.kakaocdn.net/dn/S8lUX/btq9JNyN39f/oYoWX91sjF34LkuFfuJxrk/img.png" alt="img"></p>
<ul>
<li>가장 오랫동안 사용하지 않을 페이지를 교체</li>
<li>페이지 부재(Page Fault)가 알고리즘 중 가장 적으나 구현이 어렵다.</li>
<li>프로세스가 앞으로 사용할 페이지를 알아야함</li>
</ul>
<h3 id="LRU-Least-Recently-Uesd-알고리즘"><a href="#LRU-Least-Recently-Uesd-알고리즘" class="headerlink" title="LRU(Least Recently Uesd) 알고리즘"></a>LRU(Least Recently Uesd) 알고리즘</h3><p><img src="https://blog.kakaocdn.net/dn/b1csvE/btq9IZlYnx0/wbSZzZfsBkbmQ80nnf9LdK/img.png" alt="img"></p>
<ul>
<li>가장 오랫동안 사용하지 않은 페이지를 교체</li>
<li>최적 알고리즘과 비슷한 효과</li>
<li>많은 운영체제가 선택하는 성능이 좋은 알고리즘</li>
<li>기록을 TimeStamping에 오버헤드가 존재한다</li>
</ul>
<h3 id="MRU-Most-Recently-Used-알고리즘"><a href="#MRU-Most-Recently-Used-알고리즘" class="headerlink" title="MRU(Most Recently Used) 알고리즘"></a>MRU(Most Recently Used) 알고리즘</h3><ul>
<li>가장 참조 횟수가 많은 페이지를 교체하는 알고리즘</li>
<li>Belady’s anomaly 현상이 일어날 수 있다</li>
</ul>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><ul>
<li><p><a target="_blank" rel="noopener" href="https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Operating%20System/Page%20Replacement%20Algorithm.md">gyoogle &#x2F; tech-interview-for-developer</a></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://doh-an.tistory.com/28">https://doh-an.tistory.com/28</a></p>
</li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-19T05:07:01.000Z" title="2023. 1. 19. 오후 2:07:01">2023-01-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-19T07:26:32.206Z" title="2023. 1. 19. 오후 4:26:32">2023-01-19</time></span><span class="level-item"><a class="link-muted" href="/categories/CS/">CS</a></span><span class="level-item">8 minutes read (About 1216 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/19/CS-%EB%A7%88%EC%83%AC%EB%A7%81-Marshalling-%EC%A7%81%EB%A0%AC%ED%99%94-Serialization-%EC%B0%A8%EC%9D%B4/">CS - 마샬링(Marshalling) 직렬화(Serialization) 차이</a></h1><div class="content"><p>개발자들과 대화에서 마샬링과 직렬화는 어떤 차이가 있는지에 대한 주제가 논의로 발생해서 이에 대해서 궁금증이 생겨 이 두 개의 차이점을 알아보고 정리해보려고합니다.</p>
<h3 id="마샬링이란"><a href="#마샬링이란" class="headerlink" title="마샬링이란?"></a>마샬링이란?</h3><h6 id="위키피디아를-번역한-내용입니다"><a href="#위키피디아를-번역한-내용입니다" class="headerlink" title="위키피디아를 번역한 내용입니다."></a>위키피디아를 번역한 내용입니다.</h6><blockquote>
<p>미국식 철자는 Marshaling</p>
</blockquote>
<p>CS에서 __마샬링(Marshalling)__은 파일로 저장하거나 네트워크 전송하기 위해서 객체의 데이터 포맷을 적합한 형태로 변환하여 메모리에 표현하는 과정입니다. 일반적으로 컴퓨터 프로그램에서 서로 다른 파트끼리 데이터를 전달하거나 하나의 프로그램에서 다른 프로그램으로 데이터를 전달할 때 사용됩니다. </p>
<p>**마샬링(Marshalling)**은 **직렬화(Serialization)**와 유사하거나 동의어일 수 있습니다. 마샬링은 클라이언트에서 서버에 어떠한 객체를 전달하려는 인텐트나 프로세스로 표현할 수 있습니다. 인텐트는 하나의 실행중인 프로그램에서 동일한 객체를 다른 실행중인 프로그램에도 가지고 있는 것입니다. 즉, 서버에 전송되어 표시되는 객체를 의미합니다. </p>
<p>직렬화는 바이트 스트림을 같은 데이터를 변환하는것에만 관심이 있으므로 인텐트를 가질 필요는 없습니다. 마샬링은 직렬화와 다른 방식으로 수행되지만 직렬화 형식을 일반적으로 사용합니다. </p>
<p>기본 오브젝트(primitives object) 대신 혼합 오브젝트(composite object)를 사용하기 때문에 복잡한 커뮤니케이션을 단순화 할 수 있습니다. 마샬링의 반대되는 개념으로 언마샬링이 있습니다.(언마샬링은 deserialization과 유사합니다)<br>언마샬링 인터페이스는 직렬화된 객체를 가지고와서 내부 데이터 구조로 변경합니다.</p>
<p>마샬링의 정확한 정의는 파이썬, 자바, 닷넷프레임워크등의 다양한 프로그래밍의 언어마다 다르며 일부의 컨텍스트에서는 직렬화와 같은 의미로 사용합니다.</p>
<h3 id="직렬화와-다른점"><a href="#직렬화와-다른점" class="headerlink" title="직렬화와 다른점"></a>직렬화와 다른점</h3><p>객체를 직렬화한다는 건 객체의 복사본으로 다시 변환할 수 있는 방식으로 바이스 스트림으로 변환하다는 것을 의미합니다. 마샬링이라는 용어는 파이썬 표준 라이브러리에서 내부 파이썬 객체를 저장하는 특수한 유형의 직렬화에 사용됩니다. </p>
<p>마샬링은 원격 호출을 위해 객체를 직렬화할 때 사용됩니다. 마샬링된 객체는 원래 객체의 상태를 코드베이스를 포함하여 기록합니다(코드베이스는 소스코드가 아니라 객체 코드 URL 목록). 따라서 다시 객체 상태와 코드베이스를 변환하려면 언마샬링을 수행해야합니다. 따라서 객체를 “마샬링”한다는 것은 마샬링된 객체가 “비마샬링”될 때 객체의 상태와 코드베이스를 기록하여 원본 객체의 복사본을 얻을 수 있게하는 행위입니다.</p>
<hr>
<h3 id="차이점"><a href="#차이점" class="headerlink" title="차이점"></a>차이점</h3><p><strong>마샬링</strong>은 객체의 메모리 구조에서 저장 또는 전송에 적합한 다른 데이터 형식으로 변환하는 과정이다. 마샬링은 프로그램간 이동할 때 사용하는 변환 과정이라고 할 수 있다. 이 과정에서 비마샬링할 때 객체의 복사본을 얻을 수 있게 원격 객체의 상태와 코드베이스를 기록한다. </p>
<p><strong>직렬화</strong>는 객체의 상태를 저장하기 위해 객체를 바이트 스트림(Byte Stream) 형태로 변환하는 것을 의미한다. 즉 객체에 저장된 데이터를 스트림 형태로 쓰기위해 연속적인 데이터로 변환하는 것이다</p>
<p>마샬링은 직렬화보다 더 큰 개념으로 사용된다. 그래서 직렬화 가능하거나 리모트 가능한 모든 객체는 마샬링이 가능하다. 즉 정리하면 큰 차이는 직렬화는 객체가 대상이고 마샬링은 변환 그 자체의 목적으로 코드베이스를 기록하는데 차이가 있다.</p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><ul>
<li><a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EB%A7%88%EC%83%AC%EB%A7%81_(%EC%BB%B4%ED%93%A8%ED%84%B0_%EA%B3%BC%ED%95%99)">마샬링 - 위키디피아</a></li>
<li><a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EC%A7%81%EB%A0%AC%ED%99%94">직렬화 - 위키디피아</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Marshalling_(computer_science)">Marshalling - Wikipedia</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-19T02:05:33.000Z" title="2023. 1. 19. 오전 11:05:33">2023-01-19</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-19T02:08:40.242Z" title="2023. 1. 19. 오전 11:08:40">2023-01-19</time></span><span class="level-item"><a class="link-muted" href="/categories/Kotlin/">Kotlin</a></span><span class="level-item">4 minutes read (About 600 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/19/kotlin-%EB%8F%99%EB%93%B1%EC%84%B1-Equality-%EB%8F%99%EC%9D%BC%EC%84%B1-Identify/">kotlin 동등성(Equality), 동일성(Identify)</a></h1><div class="content"><p>코틀린에서는 두 객체를 비교하는타입에는 2가지가 있습니다.</p>
<ul>
<li>동등성, Structural equality (&#x3D;&#x3D;)</li>
<li>동일성, Referential equality (&#x3D;&#x3D;&#x3D;)</li>
</ul>
<p>동일성은 객체가 참조하는 주소값을 비교하고, 동등성은 객체가 가지는 정보를 비교합니다.</p>
<p>Java에서는 동일성인 <code>==</code>가 코틀린의 동일성인 <code>===</code>와 같은 것을 의미하고 Java 동등성인  <code>equals</code>는 코틀린의 동등성인 <code>==</code>를 의미합니다.</p>
<table>
<thead>
<tr>
<th></th>
<th>Kotlin</th>
<th>Java</th>
</tr>
</thead>
<tbody><tr>
<td>동등성(equality)</td>
<td>&#x3D;&#x3D;</td>
<td>equals</td>
</tr>
<tr>
<td>동일성(Identify)</td>
<td>&#x3D;&#x3D;&#x3D;</td>
<td>&#x3D;&#x3D;</td>
</tr>
</tbody></table>
<h3 id="동등성-비교-Structural-equality"><a href="#동등성-비교-Structural-equality" class="headerlink" title="동등성 비교(Structural equality)"></a>동등성 비교(Structural equality)</h3><p>코틀린에서는 <code>==</code> 연산자나 반대인 <code>!=</code> 연산자로 구조적 동등성을 확인 할 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">a?.equals(b) ?: (b === <span class="literal">null</span>)</span><br></pre></td></tr></table></figure>

<p>위 코드는 <code>a</code>가 <code>null</code>이 아닐 때 <code>equals(Any?)</code>함수를 호출하고 <code>a</code>가 <code>null</code>이 아닐 때 b의 레퍼런스가 <code>null</code>과 같은지에 대한 코드입니다. <code>a == null</code> 코드는 자동적으로 <code>a === null</code>로 변환해주기 때문에  <code>null</code>을 명시적으로 <code>==</code>로 비교하는 것은  의미가 없습니다. </p>
<p><code>equals(other: Any?): Boolean)</code> 함수를 오버라이딩해서 커스텀 equals를 구현할 수 있습니다. <code>equals(other: Foo)</code> 함수와 같은 이름과 시그니처를 가진 함수는 <code>==</code> 및 <code>!=</code> 연산자를 사용한 동등성 검사에 영향을 주지 않습니다.</p>
<p>또한 동등성 비교는 <code>Comparable&lt;...&gt;</code> 같은 인터페이스를 정의해서 비교할 필요가 없습니다. 오직 커스텀 <code>equals(Any?)</code>만 구현해서 동작할 수 있게 하면 됩니다</p>
<h3 id="동일성-비교-Referential-equality"><a href="#동일성-비교-Referential-equality" class="headerlink" title="동일성 비교(Referential equality)"></a>동일성 비교(Referential equality)</h3><p>동일성 비교는 <code>===</code>연산자와 그 반대인 <code>!==</code>로 동일성 검사를 할 수 있습니다. <code>a===b</code>가 true를 리턴할 때는 <code>a</code>와 <code>b</code>가 가리키는 주소 값이 동일 하다는 것을 의미합니다. 런타임시 primitive타입(Int, String, Float..)의 값의 경우 <code>===</code>은 <code>==</code>와 동일합니다.</p>
<h3 id="Floating-point-숫자-비교"><a href="#Floating-point-숫자-비교" class="headerlink" title="Floating-point 숫자 비교"></a>Floating-point 숫자 비교</h3><p>피연산 함수로 알려진 Float, Dobule(null 혹은 not null)은 IEEE 754 표준에 맞는 부동 소수점 산술을 따라야합니다. 아래와 같은 기준을 따르지 않는다면 동등성 비교가 사용됩니다.</p>
<ul>
<li><p><code>Nan</code>은 <code>NaN</code>자신과 동등한 것으로 비교가 가능하다</p>
</li>
<li><p><code>NaN</code>은  <code>POSITIVE_INFINITY</code>를 포함해 다른 어떤 것보다 크다</p>
</li>
<li><p><code>-0.0</code>은 <code>0.0</code> 보다 작다</p>
</li>
</ul>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><p><a target="_blank" rel="noopener" href="https://kotlinlang.org/docs/equality.html">Kotlin Docs - Equality</a></p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-18T06:27:02.000Z" title="2023. 1. 18. 오후 3:27:02">2023-01-18</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-18T06:28:08.360Z" title="2023. 1. 18. 오후 3:28:08">2023-01-18</time></span><span class="level-item"><a class="link-muted" href="/categories/android/">android</a></span><span class="level-item">12 minutes read (About 1775 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/18/%EC%95%88%EB%93%9C%EB%A1%9C%EC%9D%B4%EB%93%9C-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A0%84%EC%9A%A9-%EB%AA%A8%EB%93%88%EC%97%90%EC%84%9C-%ED%9A%A8%EA%B3%BC%EC%A0%81%EC%9D%B8-%ED%85%8C%EC%8A%A4%ED%8A%B8%ED%95%98%EA%B8%B0/">안드로이드 테스트 전용 모듈에서 효과적인 테스트하기</a></h1><div class="content"><h1 id=""><a href="#" class="headerlink" title=""></a></h1><blockquote>
<p> <em>이 글은</em> <a target="_blank" rel="noopener" href="https://medium.com/u/15137f2c6270?source=post_page-----634ef913ac30--------------------------------">Shubham Garg</a><em>님의 <a target="_blank" rel="noopener" href="https://proandroiddev.com/effective-testing-with-android-test-only-modules-3164ed9b20a0">글</a>을 번역한 글입니다.</em></p>
</blockquote>
<p>안드로이드 앱을 다른 모듈로 모듈화하는 것은 코드 유지보수 및 빌드 성능에 이점이 있는지는 모두 알고 있습니다.</p>
<p>따라서 이 글에서는 계측 테스트에서도 동일하게 이 이점을 가져갈 수 있는지에 대해서 얘기해보려고합니다.</p>
<p>안드로이드 라이브러리 모듈과 앱 모듈은 디바이스에서 실행되는 테스트를 작성할 수 있는 <code>androidTest</code>와 JVM에서 로컬로 실행되는 <code>test(unitTest)</code>소스 세트가 있습니다. </p>
<p>Robolectric같은 프레임워크를 사용하거나 안드로이드 프레임워크 의존성이 요구 될 때마다 더 빠르고 쉽게 실행하기 위해서 Mocks&#x2F;Stubs  를 사용하거나 모든 테스트를 JVM에서 작성하고 싶을 때가 있습니다. 하지만 앱에서는 JVM머신으로 컴파일되지 않은 네이티브 라이브러리를 가질 수 있고 실제 디바이스에서 동작하는 테스트를 작성하고 싶을 때는 <code>androidTest</code> 소스 세트에서 작성해야 합니다. </p>
<p> <code>androidTest</code> 소스 세트에서 테스트 코드를 작성함으로 팀내에서 개발자와 QA 모두 앱의 다양한 시나리오를 자동화 할 수 있습니다.  스크린샷 테스트, 네트워크 테스트, E2E 워크플로 테스트,퍼포먼스 테스트, 기타 등으로 구성된 앱 모듈에서 설정된 <code>androidTest</code> 소스 세트는 수백개에서 수천 개의 테스트로 인해 크기를 증가시킬 수 있고 이로 인해 새로운 테스트를 위한 안드로이드 테스트 APK를 생성하는 것 자체가 일반 APK 생성 시간보다 더 많은 시간이 걸립니다. Hilt나 Dagger 같은 플러그인을 사용한다면 더 상황이 나빠질 수 있습니다. 해당 테스트가 외부 요인 없이 로컬에서 작동해야하는지, 테스트가 특정 장치나 종속성에 의존하는지에 대한 결정하는 것은  어려울 수 있습니다. 어노테이션 효과적으로 관리하기 위해 새로운 어노테이션을 도입해야 할 수도 있습니다.</p>
<p><img src="https://miro.medium.com/max/1312/1*95Yn5pA_itzTsqy99ddpGg.png" alt="img"></p>
<p>이것은 androidTest 코드가 시작할 때 관리하기 어려운 이유입니다.</p>
<h3 id="테스트-코드를-모듈로-분리"><a href="#테스트-코드를-모듈로-분리" class="headerlink" title="테스트 코드를 모듈로 분리"></a>테스트 코드를 모듈로 분리</h3><p>테스트코드를 유지보수하기 더 쉽게 만드는 방법은 <code>androidTest</code> 코드를 다른 gradle 모듈로 분리하는 것 입니다. 분리하는 방법 중 하나는 별도의 라이브러리 모듈을 만들어서 앱 모듈에 의존성을 포함하는 것입니다. 하지만 이렇게 하는 것은 생각보다 간단하지 않고 Manifest 머지 이슈를 마주할 수도 있습니다. 또한  <code>main</code>과 <code>test</code> 소스 세트가 필요하지 않은 새로운 라이브러리 모듈을 만들어야합니다.</p>
<p>안드로이드 테스트 모듈들이 분리되는 모습입니다. 이 모듈은 오직 계측 테스트만을 포함하고 앱 이나 다른 라이브러리 모듈을 의존하고 있는 특수 모듈입니다.</p>
<p><img src="https://miro.medium.com/max/1400/1*DADJIv7TsLhT4P9XKWJLEg.png" alt="img"></p>
<h3 id="안드로이드-테스트-모듈-만들기"><a href="#안드로이드-테스트-모듈-만들기" class="headerlink" title="안드로이드 테스트 모듈 만들기"></a>안드로이드 테스트 모듈 만들기</h3><p>안드로이드 테스트 만을 위한 모듈을 만들기 위해서는 다음과 같은 단계를 따라야합니다.</p>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">plugins &#123;</span><br><span class="line">    <span class="comment">// This is a test only module.</span></span><br><span class="line">    <span class="comment">// All the tests inside this would run as Android Instrumentation Tests.</span></span><br><span class="line">    id <span class="string">&#x27;com.android.test&#x27;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ol>
<li>프로젝트에서 새로운 모듈을 만들고 모듈들의 build.gradle 파일에 ‘com.android.test’ 플러그인을 작성한다</li>
</ol>
<blockquote>
<p>새로운 모듈을 만들 때 안드로이드 스튜디오의 템플릿을 사용하고 라이브러리 모듈을 시작점으로 build.gradle 파일에서 com.android.library를 com.android.test 플러그인으로 교체해줍니다. </p>
</blockquote>
<ol start="2">
<li>테스트할 프로젝트를 지정합니다</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">android &#123;</span><br><span class="line">    <span class="comment">// Here I am targeting the app module.</span></span><br><span class="line">    targetProjectPath <span class="string">&#x27;:app&#x27;</span></span><br><span class="line"></span><br><span class="line">    ....</span><br><span class="line">    <span class="comment">// If your app module has different flavors, you will have to declare the same here.</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>dependencies 블록에 일반적으로 프로젝트에서 사용하는 테스트 라이브러리 항목들을 정의합니다.</li>
</ol>
<figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">dependencies &#123;</span><br><span class="line"></span><br><span class="line">    implementation <span class="string">&#x27;androidx.core:core-ktx:1.7.0&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;androidx.appcompat:appcompat:1.5.1&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;com.google.android.material:material:1.7.0&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;junit:junit:4.13.2&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;androidx.test.ext:junit:1.1.5&#x27;</span></span><br><span class="line">    implementation <span class="string">&#x27;androidx.test.espresso:espresso-core:3.5.1&#x27;</span></span><br><span class="line">    implementation project(<span class="string">&#x27;:app&#x27;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>테스트-Only 모듈에 첫번 째 테스트를 생성합니다.</li>
</ol>
<p>모든 테스트 코드는 <code>androidTest</code> 소스 세트가 아닌 <code>main</code> 소스 세트 안에 있어야 합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ExampleAppInstrumentedTest</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@get:Rule</span></span><br><span class="line">    <span class="keyword">val</span> activityScenarioRule = ActivityScenarioRule(MainActivity::<span class="keyword">class</span>.java)</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">testAppModuleActivity</span><span class="params">()</span></span> &#123;</span><br><span class="line">        Espresso.onView(ViewMatchers.withId(com.example.testonlymodule.R.id.main_activity_view))</span><br><span class="line">            .check(ViewAssertions.matches(ViewMatchers.isDisplayed()))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>계측 테스트를 Gradle 커맨드를 통해 실행해볼 수 있습니다.(moduleName은 실제 모듈의 이름으로 변경해야 합니다.)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./gradlew :&#123;moduleName&#125;:connectedDebugAndroidTest</span><br></pre></td></tr></table></figure>



<p>지금까지가 계측 테스트를 위해 테스트-Only 모듈을 설정하는 방법입니다.</p>
<p>전체 구현된 예제를 보려면 아래 저장소를 참고하세요.</p>
<p><a target="_blank" rel="noopener" href="https://github.com/shubhamgarg1/TestOnlyModule">https://github.com/shubhamgarg1/TestOnlyModule</a></p>
<p>Jacoco를 사용해서 앱의 모듈들에서 코드 커버리지를 생성할 수 있고 이런 테스트들을 헤드리스 에뮬레이터를 사용해서 실행할 수 있습니다(최소 AGP 버전 7.3.1)</p>
<h3 id="보너스-다른-테스트-모듈간의-코드-공유"><a href="#보너스-다른-테스트-모듈간의-코드-공유" class="headerlink" title="보너스 : 다른 테스트 모듈간의 코드 공유"></a>보너스 : 다른 테스트 모듈간의 코드 공유</h3><p>테스트 모듈간에 코드를 공유하는 방법 모든 테스트 모듈들이 포함된  <code>shared test</code> 모듈을 생성하는것 입니다. <code>shared test</code> 모듈은 안드로이드가 테스트-Only 모듈이 다른 모듈에 포함하는 것을 허용하지 않으므로 라이브러리 모듈이어야 합니다.</p>
<p>unit test와 android Test 소스세트들 사이에서 코드를 공유할 때와 동일한 개념으로 사용됩니다. 이전에는 2개의 소스세트에 공통 패키지를 포함하여 사용할 수 있었지만 Android Studio Chipmunk에서는 더 이상 불가능합니다.</p>
<p>네트워크 테스트와 퍼포먼스 테스트 모듈간의 공유가 가능한 유틸리티가 있다고 가정했을 때 Share Test Utility 모듈을 만들어서 공유할 수 있습니다.</p>
<p><img src="https://miro.medium.com/max/1400/1*uxXHqSwa5LaLuM6Ch27msw.png" alt="img"></p>
<h3 id="결론"><a href="#결론" class="headerlink" title="결론"></a>결론</h3><p><code>com.android.test</code> 플러그인을 사용하여 테스트 코드를 정리하고 더 유지보수가 쉽고 유연하게 도와주는 것을 알 수 있습니다. 이런 분리된 형태는 모든 커밋 후에 일부 테스트 모듈을 실행할지, 매일 한 번 테스트 모듈을 실행할지에 대한 결정을 도와줍니다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-17T05:07:10.000Z" title="2023. 1. 17. 오후 2:07:10">2023-01-17</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-30T12:22:42.083Z" title="2023. 1. 30. 오후 9:22:42">2023-01-30</time></span><span class="level-item"><a class="link-muted" href="/categories/Design-Pattern/">Design Pattern</a><span> / </span><a class="link-muted" href="/categories/Design-Pattern/Creational/">Creational</a></span><span class="level-item">8 minutes read (About 1252 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/17/%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4-Singleton-Pattern/">싱글톤 패턴 - Singleton Pattern</a></h1><div class="content"><h2 id="싱글톤-패턴"><a href="#싱글톤-패턴" class="headerlink" title="싱글톤 패턴"></a>싱글톤 패턴</h2><p>이번글에서는 디자인 패턴 중 하나인 싱글톤 패턴에 대해서 알아봅니다. </p>
<p>싱글톤 패턴은 객체 지향 소프트웨어에서 반복되는 문제를 해결하기 위해 잘 설명해진 <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Design_Patterns">GoF 디자인 패턴</a> 중 하나입니다. 싱글톤 패턴은 클래스의 인스턴스화를 <strong>단일 인스턴스</strong>로 제한하는 패턴입니다. </p>
<h2 id="싱글톤-패턴의-특징"><a href="#싱글톤-패턴의-특징" class="headerlink" title="싱글톤 패턴의 특징"></a>싱글톤 패턴의 특징</h2><ul>
<li>오직 하나의 객체 인스턴스를 가진다</li>
<li>인스턴스에 접근하기 위한 쉬운 방법을 제공한다</li>
<li>인스턴스화를 컨트롤한다 (ex.클래스 생성자를 숨김)</li>
</ul>
<h4 id="싱글톤-패턴의-장점"><a href="#싱글톤-패턴의-장점" class="headerlink" title="싱글톤 패턴의 장점"></a>싱글톤 패턴의 장점</h4><p>싱글톤 패턴을 사용하여 인스턴스를 한 개로만 가져가면 아래와 같은 이점이 있습니다.</p>
<ul>
<li><strong>메모리 비용 절감</strong> : 객체를 생성할 때 마다 메모리를 할당 받는데 한번의 최초 한번의 new를 통해 객체를 생성한다면 고정된 메모리 영역의 사용으로 메모리 비용을 절감할 수 있다</li>
<li><strong>데이터 공유</strong> : 싱글톤 인스턴스는 전역으로 사용되는 인스턴스이기 때문에 다른 클래스의 인스턴스들과 데이터를 공유할 수 있다</li>
</ul>
<h4 id="싱글톤-패턴의-단점"><a href="#싱글톤-패턴의-단점" class="headerlink" title="싱글톤 패턴의 단점"></a>싱글톤 패턴의 단점</h4><p>싱글톤 패턴만의 장점도 분명하지만 반대로 안티패턴이라고 불릴만큼 단점도 많이 있습니다.</p>
<ul>
<li><strong>테스트하기 어려움</strong> : 많은 데이터를 공유할 수록 다른 클래스들 간의 결합도(Coupling)이 높아지고 개방-폐쇄원칙(OCP)을 위배하면서 테스트하기가 어려워짐</li>
<li><strong>멀티 스레드 처리</strong> : 멀티 스레드 환경에서 여러 인스턴스가 생성되는 것을 방지하기 위한 동기화 처리를 위해 syncronized 키워드를 사용해야하고 이는 많은 양의 코드를 작성을 요구함</li>
<li><strong>SOLID 원칙 위반(SRP, DIP, OCP)</strong> : 싱글톤은 Primary Function과 하나의 인스턴스만 생성 두 가지 책임이 있기 때문에 SRP를 위반하고 의존관계상 클라이언트가 구현체에 의존하면서 DIP를 위반하고 자연스럽게 OCP도 위반할 가능성이 높다.</li>
</ul>
<h2 id="구현-코드"><a href="#구현-코드" class="headerlink" title="구현 코드"></a>구현 코드</h2><h4 id="Java"><a href="#Java" class="headerlink" title="Java"></a>Java</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Coin</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">int</span> <span class="variable">ADD_MORE_COIN</span> <span class="operator">=</span> <span class="number">10</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> coin;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">Coin</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Coin</span>(); <span class="comment">// eagerly loads the singleton</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Coin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="comment">// private to prevent anyone else from instantiating</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Coin <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">getCoin</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> coin;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">addMoreCoin</span><span class="params">()</span> &#123;</span><br><span class="line">        coin += ADD_MORE_COIN;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">deductCoin</span><span class="params">()</span> &#123;</span><br><span class="line">        coin--;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="Kotlin"><a href="#Kotlin" class="headerlink" title="Kotlin"></a>Kotlin</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">object</span> Coin &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> coin: <span class="built_in">Int</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">getCoin</span><span class="params">()</span></span>:<span class="built_in">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> coin</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">addCoin</span><span class="params">()</span></span> &#123;</span><br><span class="line">        coin += <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">fun</span> <span class="title">deductCoin</span><span class="params">()</span></span> &#123;</span><br><span class="line">        coin--</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="멀티스레드-환경에서-싱글톤-생성"><a href="#멀티스레드-환경에서-싱글톤-생성" class="headerlink" title="멀티스레드 환경에서 싱글톤 생성"></a>멀티스레드 환경에서 싱글톤 생성</h3><h4 id="지연-초기화-Lazy-initialization"><a href="#지연-초기화-Lazy-initialization" class="headerlink" title="지연 초기화(Lazy initialization)"></a>지연 초기화(Lazy initialization)</h4><p>멀티 스레드에서 하나의 싱글톤 객체에 접근할 때 경쟁 상태(Race Condition)이 발생하여 여러개의 인스턴스가 생성될 수 있어 자바에서는 synchronized로 감싸서 지연 초기화를 더블체킹과함께 스레드 세이프하게 생성해야한다.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Singleton</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">volatile</span> <span class="type">Singleton</span> <span class="variable">instance</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">Singleton</span><span class="params">()</span> &#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Singleton <span class="title function_">getInstance</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">synchronized</span>(Singleton.class) &#123;</span><br><span class="line">                <span class="keyword">if</span> (instance == <span class="literal">null</span>) &#123;</span><br><span class="line">                    instance = <span class="keyword">new</span> <span class="title class_">Singleton</span>();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="완벽한-싱글톤을-만들기-위해"><a href="#완벽한-싱글톤을-만들기-위해" class="headerlink" title="완벽한 싱글톤을 만들기 위해"></a>완벽한 싱글톤을 만들기 위해</h3><p>앞서 제시한 싱글톤을 생성한 방법은 두가지 문제점이 있다</p>
<ol>
<li>직렬화와 역직렬화</li>
<li>리플렉션<br>싱글톤 클래스를 직렬화와 역직렬화 할 때 인스턴스가 새로 생성되어 싱글톤의 단일 인스턴스를 위반한다. 그리고 리플렉션을 이용하여 런타임에 싱글톤 private 생성자에 접근하여 새로운 인스턴스를 생성할 수 있다. 이 두가지 문제는 Enum을 통해 해결할 수 있다</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> <span class="title class_">EnumSingleton</span> &#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">    String name;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getName</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setName</span><span class="params">(String name)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// EnumSingleton singleton = EnumSingleton.INSTANCE;</span></span><br></pre></td></tr></table></figure>
<p>Enum은 직렬화와 역직렬화가 가능하기 때문에 별도의 <code>Serializable</code>을 구현하지 않아도 되고 리플렉션을 시도하려고 하면 <code>NoSuchMethodException </code>이 발생하기 때문에 외부에서 싱글톤 인스턴스를 생성하는 것은 불가능하므로 완벽한 싱글톤 형태라고 불린다.</p>
<h2 id="결론"><a href="#결론" class="headerlink" title="결론"></a>결론</h2><p>싱글톤은 이점이 있는 패턴이지만 앱 전역의 상태 관리를 하는데 있어서 안티패턴으로 간주된다. 이로 인해 싱글톤에 대한 잠재적인 종속성이 도입되어 실제 코드를 분석하기 위한 어려움과 크고 리팩토링에 대한 비용도 증가한다. 그리고 SOLID 원칙중 SRP, DIP, OCP를 위반 할 수 있고 이로인해 테스트하기 어렵다. </p>
<h3 id="참고"><a href="#참고" class="headerlink" title="참고"></a>참고</h3><ul>
<li><a target="_blank" rel="noopener" href="http://www.butunclebob.com/ArticleS.UncleBob.SingletonVsJustCreateOne">SingletonVsJustCreateOne</a></li>
<li><a target="_blank" rel="noopener" href="https://ko.wikipedia.org/wiki/%EC%8B%B1%EA%B8%80%ED%84%B4_%ED%8C%A8%ED%84%B4">싱글턴 패턴 - 위키백과</a></li>
<li><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Singleton_pattern">Singleton pattern - Wikipedia</a></li>
</ul>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-14T14:18:27.000Z" title="2023. 1. 14. 오후 11:18:27">2023-01-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-17T15:35:29.278Z" title="2023. 1. 18. 오전 12:35:29">2023-01-18</time></span><span class="level-item"><a class="link-muted" href="/categories/CS/">CS</a></span><span class="level-item">2 minutes read (About 242 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/14/%EB%A9%94%EC%84%9C%EB%93%9C-%EC%8B%9C%EA%B7%B8%EB%8B%88%EC%B2%98-Method-signature-%EB%9E%80/">메서드 시그니처(Method signature)란</a></h1><div class="content"><p>메서드 시그니처(Method signature)란 무엇일까?</p>
<p>메서드 시그니처는 자바에서 프로그래머가 디자인한 메서드 구조를 의미하며 <strong>메서드 이름</strong>과 <strong>파라미터리스트로</strong> 구성됩니다. 작성된 코드는  Java 컴파일러에서 오버로딩된 함수들은 메서드 시그니처를 통해 식별합니다. </p>
<blockquote>
<p>같은 이름으로 선언하고 다른 파라미터 리스트(Signature)를 가진 것을 **메서드 오버로딩(Method Overloading)**이라고 부릅니다.</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="type">int</span> <span class="title function_">square</span><span class="params">(<span class="type">int</span> x, <span class="type">int</span> y)</span> &#123;</span><br><span class="line">  <span class="comment">///</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="type">double</span> <span class="title function_">square</span><span class="params">(<span class="type">double</span> x, <span class="type">double</span> y)</span> &#123;</span><br><span class="line">	<span class="comment">///</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>하나의 클래스 안에서는 2개의 같은 시그니처를 가질 수 없습니다. 만약 두개의 같은 시그니처 메서드를  선언한다면 컴파일 에러가 발생합니다. 또한 메서드 시그니처는 메서드의 리턴타입을 포함하지 않습니다.</p>
</div></article></div><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2023-01-13T18:35:38.000Z" title="2023. 1. 14. 오전 3:35:38">2023-01-14</time></span><span class="level-item">Updated&nbsp;<time dateTime="2023-01-19T02:09:49.878Z" title="2023. 1. 19. 오전 11:09:49">2023-01-19</time></span><span class="level-item"><a class="link-muted" href="/categories/Kotlin/">Kotlin</a></span><span class="level-item">11 minutes read (About 1600 words)</span></div></div><h1 class="title is-3 is-size-4-mobile"><a class="link-muted" href="/2023/01/14/kotlin-sequence/">kotlin-sequence</a></h1><div class="content"><p>Kotlin standard library는 Collection과 함께 또 다른 유형인 <em>Sequences</em><code>(Sequence&lt;T&gt;)</code> 를 포함하고 있습니다. 컬렉션과는 달리 시퀀스는 엘리먼트를 포함하지 않으며 반복하는 동안 엘리먼트를 생성합니다. 시퀀스는 <code>Iterable</code>과 동일한 기능을 제공하지만 여러 단계 처리에 대한 다른 접근방식을 구현합니다.</p>
<p><code>Iterable</code>은  여러 과정을 처리할 때 각 단계를 완료하고 그 결과인 중간 컬렉션을 반환합니다. 시퀀스는 여러 과정의 처리에서 가능한 Lazily(나중에)하게 처리합니다. 이 의미는 시퀀스는 여러 단계의 처리는 바로 실행하지 않고 전체 단계가 처리된 결과가 요청되었을 때 실제 시퀀스 연산이 일어나면서 Lazily(나중에)하게 처리됩니다.</p>
<p>동작 실행 순서도 다르다고 할 수 있습니다. <code>Sequence</code>는 모든 단일 요소에 대해 처리를 One-By-One 형태로 수행하는 반면 <code>Iterable</code> 은 전체 컬렉션의 각 단계를 완료하고 그 다음 단계로 진행합니다.</p>
<p>따라서 시퀀스를 사용하면 중간 단계의 결과에 대한 처리를 피할 수 있습니다. 그러므로 전체 컬렉션의 체이닝 동작에서 퍼포먼스 향상을 기대할 수 있습니다. 그러나 이런 시퀀스의 Lazy 특성은 오히려 간단한 계산이나 작은 컬렉션을 처리할 때 불필요한 오버헤드가 발생할 수 있습니다. 이런 이유로 <code>Sequence</code>와 <code>Iterable</code> 사이에서 어떤것이 해당 케이스에서 더 효율적인지를 고려해야합니다.</p>
<h1 id="Construct"><a href="#Construct" class="headerlink" title="Construct"></a>Construct</h1><h4 id="From-elements"><a href="#From-elements" class="headerlink" title="From elements"></a>From elements</h4><p>시퀀스를 만들기 위해서는 <code>sequenceOf()</code> 함수를 호출하고 인자들을 나열하면 됩니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> numbersSequence = sequenceOf(<span class="string">&quot;four&quot;</span>, <span class="string">&quot;three&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;one&quot;</span>)</span><br></pre></td></tr></table></figure>



<h4 id="From-an-Iterable"><a href="#From-an-Iterable" class="headerlink" title="From an Iterable"></a>From an Iterable</h4><p><code>Iterable</code>객체(<code>List</code>와  <code>Set</code>등)를 <code>asSequence()</code>를 호출해서 시퀀스로 만들 수 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> numbers = listOf(<span class="string">&quot;one&quot;</span>, <span class="string">&quot;two&quot;</span>, <span class="string">&quot;three&quot;</span>, <span class="string">&quot;four&quot;</span>)</span><br><span class="line"><span class="keyword">val</span> numbersSequence = numbers.asSequence()</span><br></pre></td></tr></table></figure>

<h4 id="From-a-Function"><a href="#From-a-Function" class="headerlink" title="From a Function"></a>From a Function</h4><p>시퀀스의 요소들을 계산 할 수 있는 방식인 <code>generateSequence()</code>함수와 함께 구축하는 방법도 있습니다. 선택적으로 첫번째 인자를 명시적으로 선언할 수 있습니다. 이런 시퀀스 생성은 <code>null</code>을 반환하면 중지됩니다. 아래 예제를 보면 무한한 시퀀스가 있습니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> oddNumbers = generateSequence(<span class="number">1</span>) &#123; it + <span class="number">2</span> &#125; <span class="comment">// `it` is the previous element</span></span><br><span class="line"><span class="comment">//println(oddNumbers.take(5).toList()) // Result : [1, 3, 5, 7, 9]</span></span><br><span class="line"></span><br><span class="line">println(oddNumbers.count())     <span class="comment">// error: the sequence is infinite</span></span><br><span class="line"><span class="comment">// Result : Evaluation stopped while it&#x27;s taking too long️</span></span><br></pre></td></tr></table></figure>

<p> <code>generateSequence()</code>를 사용할 때 유한한 시퀀스를 만들기 위해서는 마지막 요소 다음에 null을 반환해야 합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> oddNumbersLessThan10 = generateSequence(<span class="number">1</span>) &#123; <span class="keyword">if</span> (it &lt; <span class="number">8</span>) it + <span class="number">2</span> <span class="keyword">else</span> <span class="literal">null</span> &#125;</span><br><span class="line">println(oddNumbersLessThan10.count()) <span class="comment">// Result: 5</span></span><br></pre></td></tr></table></figure>

<h3 id="From-chunk"><a href="#From-chunk" class="headerlink" title="From chunk"></a>From chunk</h3><p>마지막으로 시퀀스를 임의의 크기의 덩어리로 생성할 수 있는 기능이 있습니다. 이 기능은 람다 함수내에서 호출할 수 있는 <code>yield()</code> 그리고 <code>yieldAll()</code> 함수입니다. 이 함수는 시퀀스 소비자에게 요소들을 반환하고 소비자가 다음 요소를 요청할 때 까지 <code>sequence()</code> 실행을 일시중단 합니다. <code>yield()</code>는 단일 요소를 인자로 가지고 <code>yieldAll()</code>은 <code>Iterable</code>객체를 인자로 가지고 <code>Iterator</code>나 다른 <code>Sequence</code>도 가질 수 있습니다. <code>yieldAll</code>에 인자로 들어가는 <code>Sequence</code>는 무한할 수 있지만 모든 후속 호출은 실행되지 않기 때문에 마지막에만 호출해야 합니다.</p>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> oddNumbers = sequence &#123;</span><br><span class="line">    yield(<span class="number">1</span>)</span><br><span class="line">    yieldAll(listOf(<span class="number">3</span>, <span class="number">5</span>))</span><br><span class="line">    yieldAll(generateSequence(<span class="number">7</span>) &#123; it + <span class="number">2</span> &#125;)</span><br><span class="line">&#125;</span><br><span class="line">println(oddNumbers.take(<span class="number">5</span>).toList())</span><br></pre></td></tr></table></figure>



<h2 id="Sequence-operations"><a href="#Sequence-operations" class="headerlink" title="Sequence operations"></a>Sequence operations</h2><p>시퀀스 동작은 상태요구에 따라서 그룹별로 분류될 수 있습니다. </p>
<ul>
<li><code>map()</code>이나 <code>filter()</code>과 같은 스테이트리스(Stateless) 동작은 상태나 각 요소들간의 의존적인 과정을 요구하지 않지만 <code>take()</code> 나 <code>drop()</code>처럼 적은 양을 가진 상수의 상태는 요구할 수 있습니다.</li>
<li>스테이트풀(Stateful) 동작은 시퀀스에서 비례하는 요소들의 숫자만큼 상당한 양의 상태가 필요합니다.</li>
</ul>
<p>시퀀스 동작이 Lazliy하게 생성된 다른 시퀀스를 리턴하면 그것을 <code>itermediate</code>라 하고 다른 동작은 <code>terminal</code>이라고 합니다.<code>terminal</code>의 수행 동작의 예로는 <code>toList()</code> 또는 <code>sum()</code>이 있습니다. 시퀀스 요소들은 오직 <code>terminal</code>이라는 동작으로만 얻어질 수 있습니다. </p>
<p>시퀀스는 여러번의 Iteration이 가능하지만 일부 시퀀스의 구현은 한번만 반복으로 되도록 제한되어 있습니다. 해당 내용은 문화되어있습니다.</p>
<h2 id="Sequence-processing-example"><a href="#Sequence-processing-example" class="headerlink" title="Sequence processing example"></a>Sequence processing example</h2><p><code>Iterable</code>과 <code>Sequnce</code>의 차이를 예제로 살펴보겠습니다.</p>
<h4 id="Iterable"><a href="#Iterable" class="headerlink" title="Iterable"></a>Iterable</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> words = <span class="string">&quot;The quick brown fox jumps over the lazy dog&quot;</span>.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="keyword">val</span> lengthsList = words.filter &#123; println(<span class="string">&quot;filter: <span class="variable">$it</span>&quot;</span>); it.length &gt; <span class="number">3</span> &#125;</span><br><span class="line">    .map &#123; println(<span class="string">&quot;length: <span class="subst">$&#123;it.length&#125;</span>&quot;</span>); it.length &#125;</span><br><span class="line">    .take(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">println(<span class="string">&quot;Lengths of first 4 words longer than 3 chars:&quot;</span>)</span><br><span class="line">println(lengthsList)</span><br><span class="line"><span class="comment">// Result</span></span><br><span class="line"><span class="comment">// filter: The</span></span><br><span class="line"><span class="comment">// filter: quick</span></span><br><span class="line"><span class="comment">// filter: brown</span></span><br><span class="line"><span class="comment">// filter: fox</span></span><br><span class="line"><span class="comment">// filter: jumps</span></span><br><span class="line"><span class="comment">// filter: over</span></span><br><span class="line"><span class="comment">// filter: the</span></span><br><span class="line"><span class="comment">// filter: lazy</span></span><br><span class="line"><span class="comment">// filter: dog</span></span><br><span class="line"><span class="comment">// length: 5</span></span><br><span class="line"><span class="comment">// length: 5</span></span><br><span class="line"><span class="comment">// length: 5</span></span><br><span class="line"><span class="comment">// length: 4</span></span><br><span class="line"><span class="comment">// length: 4</span></span><br><span class="line"><span class="comment">// Lengths of first 4 words longer than 3 chars:</span></span><br><span class="line"><span class="comment">// [5, 5, 5, 4]</span></span><br></pre></td></tr></table></figure>

<p>위의 예제를 보면 단어 리스트에서 길이가 3을 초과하는 <code>filter()</code>와 필터링된 문자열 길이를 <code>map()</code> 이 순서대로 호출되는걸 볼 수 있습니다. 순차적으로 filter의 모든 요소들이 수행되고 리턴된 결과로 map이 수행됩니다.</p>
<p><img src="https://kotlinlang.org/docs/images/list-processing.png" alt="image"></p>
<h4 id="Sequence"><a href="#Sequence" class="headerlink" title="Sequence"></a>Sequence</h4><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> words = <span class="string">&quot;The quick brown fox jumps over the lazy dog&quot;</span>.split(<span class="string">&quot; &quot;</span>)</span><br><span class="line"><span class="comment">//convert the List to a Sequence</span></span><br><span class="line"><span class="keyword">val</span> wordsSequence = words.asSequence()</span><br><span class="line"></span><br><span class="line"><span class="keyword">val</span> lengthsSequence = wordsSequence.filter &#123; println(<span class="string">&quot;filter: <span class="variable">$it</span>&quot;</span>); it.length &gt; <span class="number">3</span> &#125;</span><br><span class="line">    .map &#123; println(<span class="string">&quot;length: <span class="subst">$&#123;it.length&#125;</span>&quot;</span>); it.length &#125;</span><br><span class="line">    .take(<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">println(<span class="string">&quot;Lengths of first 4 words longer than 3 chars&quot;</span>)</span><br><span class="line"><span class="comment">// terminal operation: obtaining the result as a List</span></span><br><span class="line">println(lengthsSequence.toList())</span><br><span class="line"><span class="comment">// Result</span></span><br><span class="line"><span class="comment">// Lengths of first 4 words longer than 3 chars</span></span><br><span class="line"><span class="comment">// filter: The</span></span><br><span class="line"><span class="comment">// filter: quick</span></span><br><span class="line"><span class="comment">// length: 5</span></span><br><span class="line"><span class="comment">// filter: brown</span></span><br><span class="line"><span class="comment">// length: 5</span></span><br><span class="line"><span class="comment">// filter: fox</span></span><br><span class="line"><span class="comment">// filter: jumps</span></span><br><span class="line"><span class="comment">// length: 5</span></span><br><span class="line"><span class="comment">// filter: over</span></span><br><span class="line"><span class="comment">// length: 4</span></span><br><span class="line"><span class="comment">// [5, 5, 5, 4]</span></span><br></pre></td></tr></table></figure>

<p>코드의 결과물을 보면 프린트가 먼저 출력된 것을 통해  <code>filter()</code>와 <code>map()</code> 함수들이 시퀀스를 리스트로 치환할 때 호출되면서 시퀀스의 시작이 실제로 필요로 할 때 시작되는 것을 알 수 있습니다. 또한 <code>map()</code>은 <code>filter()</code>에서 요소를 리턴하자 마자 실행됩니다. 그리고 <code>take(4)</code>로 4개의 요소만 필요하기 때문에 시퀀스 처리가 만족하는 개수가 4개가 되었을 때 수행은 정지된다.</p>
<p><img src="https://kotlinlang.org/docs/images/sequence-processing.png" alt="image"></p>
</div></article></div><nav class="pagination" role="navigation" aria-label="pagination"><div class="pagination-previous"><a href="/">Previous</a></div><div class="pagination-next"><a href="/page/3/">Next</a></div><ul class="pagination-list is-hidden-mobile"><li><a class="pagination-link" href="/">1</a></li><li><a class="pagination-link is-current" href="/page/2/">2</a></li><li><a class="pagination-link" href="/page/3/">3</a></li></ul></nav></div><div class="column column-left is-3-tablet is-3-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Your name"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Your name</p><p class="is-size-6 is-block">Your title</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Your location</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Categories</p><a href="/categories"><p class="title">14</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/KennethSS" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/KennethSS"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Facebook" href="https://facebook.com"><i class="fab fa-facebook"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Twitter" href="https://twitter.com"><i class="fab fa-twitter"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Dribbble" href="https://dribbble.com"><i class="fab fa-dribbble"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/Android/"><span class="level-start"><span class="level-item">Android</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Android/Compose/"><span class="level-start"><span class="level-item">Compose</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/CS/"><span class="level-start"><span class="level-item">CS</span></span><span class="level-end"><span class="level-item tag">5</span></span></a><ul><li><a class="level is-mobile" href="/categories/CS/Data-Structure/"><span class="level-start"><span class="level-item">Data Structure</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Coroutine/"><span class="level-start"><span class="level-item">Coroutine</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/Coroutine/Flow/"><span class="level-start"><span class="level-item">Flow</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Design-Pattern/"><span class="level-start"><span class="level-item">Design Pattern</span></span><span class="level-end"><span class="level-item tag">3</span></span></a><ul><li><a class="level is-mobile" href="/categories/Design-Pattern/Behavioral/"><span class="level-start"><span class="level-item">Behavioral</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/Design-Pattern/Creational/"><span class="level-start"><span class="level-item">Creational</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/Kotlin/"><span class="level-start"><span class="level-item">Kotlin</span></span><span class="level-end"><span class="level-item tag">9</span></span></a><ul><li><a class="level is-mobile" href="/categories/Kotlin/Coroutine/"><span class="level-start"><span class="level-item">Coroutine</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/RxJava/"><span class="level-start"><span class="level-item">RxJava</span></span><span class="level-end"><span class="level-item tag">1</span></span></a><ul><li><a class="level is-mobile" href="/categories/RxJava/Transforming/"><span class="level-start"><span class="level-item">Transforming</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></li><li><a class="level is-mobile" href="/categories/android/"><span class="level-start"><span class="level-item">android</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-09T15:15:04.000Z">2023-02-10</time></p><p class="title"><a href="/2023/02/10/Android-TextView-%EC%9E%90%EB%8F%99-%ED%81%AC%EA%B8%B0-%EC%A1%B0%EC%A0%88/">Android - TextView 자동 크기 조절</a></p><p class="categories"><a href="/categories/Android/">Android</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-09T11:37:50.000Z">2023-02-09</time></p><p class="title"><a href="/2023/02/09/Android-is-translated-here-but-not-found-in-default-locale-%EC%9D%B4%EC%8A%88/">Android - is translated here but not found in default locale 이슈</a></p><p class="categories"><a href="/categories/Android/">Android</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-08T17:31:51.000Z">2023-02-09</time></p><p class="title"><a href="/2023/02/09/Kotlin-%EC%96%95%EC%9D%80-%EB%B3%B5%EC%82%AC-Shallow-Copy-%EC%99%80-%EA%B9%8A%EC%9D%80-%EB%B3%B5%EC%82%AC-Depp-Copy/">Kotlin 얕은 복사(Shallow Copy)와 깊은 복사(Depp Copy)</a></p><p class="categories"><a href="/categories/Kotlin/">Kotlin</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-04T16:46:13.000Z">2023-02-05</time></p><p class="title"><a href="/2023/02/05/%EB%8F%99%EC%8B%9C%EC%84%B1-Concurrency-%EA%B3%BC-%EB%B3%91%EB%A0%AC%EC%84%B1-Parallelism/">동시성(Concurrency)과 병렬성(Parallelism)</a></p><p class="categories"><a href="/categories/CS/">CS</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-02-02T13:01:26.000Z">2023-02-02</time></p><p class="title"><a href="/2023/02/02/Compose-hiltViewModel-%EA%B3%BC-viewModel-%EC%B0%A8%EC%9D%B4/">Compose - hiltViewModel()과 viewModel() 차이</a></p><p class="categories"><a href="/categories/Android/">Android</a> / <a href="/categories/Android/Compose/">Compose</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2023/02/"><span class="level-start"><span class="level-item">February 2023</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/archives/2023/01/"><span class="level-start"><span class="level-item">January 2023</span></span><span class="level-end"><span class="level-item tag">17</span></span></a></li><li><a class="level is-mobile" href="/archives/2022/12/"><span class="level-start"><span class="level-item">December 2022</span></span><span class="level-end"><span class="level-item tag">4</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Android/"><span class="tag">Android</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/CS/"><span class="tag">CS</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Compose/"><span class="tag">Compose</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Coroutine/"><span class="tag">Coroutine</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Design-Pattern/"><span class="tag">Design Pattern</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Flow/"><span class="tag">Flow</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Kotlin/"><span class="tag">Kotlin</span><span class="tag">5</span></a></div><div class="control"><a class="tags has-addons" href="/tags/RxJava/"><span class="tag">RxJava</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/categories/"><span class="tag">categories</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java/"><span class="tag">java</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">Subscribe for updates</h3><form action="https://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open(&#039;https://feedburner.google.com/fb/a/mailverify?uri=&#039;,&#039;popupwindow&#039;,&#039;scrollbars=yes,width=550,height=520&#039;);return true"><input type="hidden" value="" name="uri"><input type="hidden" name="loc" value="en_US"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div><div class="card widget"><div class="card-content"><div class="notification is-danger">You need to set <code>client_id</code> and <code>slot_id</code> to show this AD unit. Please set it in <code>_config.yml</code>.</div></div></div><div class="card widget" data-type="subscribe-email"><div class="card-content"><div class="menu"><h3 class="menu-label">follow.it</h3><form action="" method="post" target="_blank"><div class="field has-addons"><div class="control has-icons-left is-expanded"><input class="input" name="email" type="email" placeholder="Email"><span class="icon is-small is-left"><i class="fas fa-envelope"></i></span></div><div class="control"><input class="button" type="submit" value="Subscribe"></div></div></form></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.svg" alt="케니스의 개발 블로그" height="28"></a><p class="is-size-7"><span>&copy; 2023 John Doe</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/KennethSS"><i class="fab fa-github"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>